(function(t){function e(e){for(var a,o,c=e[0],u=e[1],s=e[2],m=0,d=[];m<c.length;m++)o=c[m],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(t[a]=u[a]);l&&l(e);while(d.length)d.shift()();return r.push.apply(r,s||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,c=1;c<n.length;c++){var u=n[c];0!==i[u]&&(a=!1)}a&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},i={app:0},r=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/google-photos-vue/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var s=0;s<c.length;s++)e(c[s]);var l=u;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},5618:function(t,e,n){},"7a13":function(t,e,n){"use strict";var a=n("5618"),i=n.n(a);i.a},"7dad":function(t,e,n){},"8b2d":function(t,e,n){"use strict";var a=n("e903"),i=n.n(a);i.a},9993:function(t,e,n){"use strict";var a=n("7dad"),i=n.n(a);i.a},be82:function(t,e,n){"use strict";var a=n("c77b"),i=n.n(a);i.a},c77b:function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e);n("d3b7"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),i=n("15fd"),r=n.n(i),o=n("2f62"),c=(n("99af"),n("7db0"),n("4160"),n("ac1f"),n("841c"),n("159b"),n("96cf"),n("1da1")),u=n("d4ec"),s=n("bee2"),l=n("bc3a"),m=n.n(l),d=function(){function t(){Object(u["a"])(this,t)}return Object(s["a"])(t,[{key:"initialize",value:function(t){return this.gapi=t,this}},{key:"getAlbum",value:function(t){return this.handle((function(e){return e.albums.get({albumId:t}).then((function(t){return t.result}))}),null)}},{key:"listAlbums",value:function(){var t=this;return this.handle(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(n){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.albums.list({pageSize:50});case 2:return a=e.sent,console.log("test"),i=a.result.albums,null===i||void 0===i||i.forEach((function(e){t.searchMediaItems(e.id).then((function(t){var n;console.log(e.title),console.log(null===(n=t.mediaItems)||void 0===n?void 0:n.length);var a=t.mediaItems;null===a||void 0===a||a.forEach((function(t){var e=t.baseUrl;m.a.head(e).then((function(t){return console.log("size: ".concat(t.headers["content-length"]))}))}))}))})),null===i||void 0===i||i.sort((function(t,e){return parseFloat(e.mediaItemsCount)-parseFloat(t.mediaItemsCount)})),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[])}},{key:"listAlbumsComplete",value:function(){var t=this.listAlbums();return t}},{key:"searchMediaItems",value:function(t,e){return this.handle((function(n){return n.mediaItems.search({resource:{albumId:t,pageSize:100,pageToken:e}}).then((function(t){return t.result}))}))}},{key:"handle",value:function(t,e){var n=this;return this.gapi.getGapiClient().then((function(a){return n.gapi.isSignedIn().then((function(n){return n?t(a.client.photoslibrary):e}))}))}}]),t}(),b=new d,p=b,f={album:null,albums:[],isSignedIn:null,mediaItem:null,mediaItems:[]},h={getAlbum:function(t,e){var n=t.commit,a=t.state;return e?new Promise((function(t){var n=a.albums.find((function(t){return e===t.id}));n?t(n):p.getAlbum(e).then(t)})).then((function(t){n("setAlbum",t),v(n,e)})):n("setAlbum",null)},listAlbums:function(t){var e=t.commit;return e("setAlbums",[]),p.listAlbums().then((function(t){e("setAlbums",t)}))},viewMediaItem:function(t){var e=t.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e("setMediaItem",n)},signIn:function(t,e){var n=t.commit;n("setIsSignedIn",e)}};function v(t,e,n){p.searchMediaItems(e,n).then((function(a){t(n?"addMediaItems":"setMediaItems",a.mediaItems);var i=a.nextPageToken;i&&v(t,e,i)}))}var g={setAlbums:function(t,e){t.albums=e},setAlbum:function(t,e){t.album=e,t.mediaItems=[]},setMediaItems:function(t,e){t.mediaItems=e},addMediaItems:function(t,e){t.mediaItems=t.mediaItems.concat(e)},setMediaItem:function(t,e){t.mediaItem=e},setIsSignedIn:function(t,e){t.isSignedIn=e,e||(t.album=null,t.albums=[],t.mediaItems=[])}},O={namespaced:!0,state:f,actions:h,mutations:g},j=O,I=n("b054"),y=n.n(I);a["a"].use(o["b"]);var _=!1,S={modules:{photos:j},strict:_,plugins:_?[y()()]:[]},x=new o["b"].Store(S),A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t.externalStatePath?t._e():n("div",[n("Login"),n("hr")],1),n("div",[n("AlbumList")],1)])},k=[],w=n("262e"),M=n("2caf"),T=n("9ab4"),P=n("60a3"),$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("select",{attrs:{disabled:!t.isSignedIn||0===t.albums.length},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}},[n("option",{attrs:{value:""}},[t._v("Select Album...")]),t._l(t.albums,(function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.title)+" ")])}))],2)},E=[],C=Object(o["a"])("photos"),L=C.mapActions,U=C.mapState,z=function(t){Object(w["a"])(n,t);var e=Object(M["a"])(n);function n(){return Object(u["a"])(this,n),e.apply(this,arguments)}return Object(s["a"])(n,[{key:"created",value:function(){this.listAlbums()}}]),n}(P["c"]);Object(T["a"])([Object(P["b"])(String)],z.prototype,"value",void 0),Object(T["a"])([Object(P["d"])("isSignedIn")],z.prototype,"listAlbums",void 0),z=Object(T["a"])([Object(P["a"])({computed:U(["albums","isSignedIn"]),methods:L(["listAlbums"])})],z);var N=z,J=N,q=n("2877"),D=Object(q["a"])(J,$,E,!1,null,null,null),F=D.exports,R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.album?n("div",{class:{"is-viewing-media-item":t.mediaItem}},[n("header",[n("h1",[t._v(t._s(t.album.title))]),n("nav",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.format,expression:"format"}],attrs:{type:"radio",id:"format-image",value:"photo"},domProps:{checked:t._q(t.format,"photo")},on:{change:function(e){t.format="photo"}}}),n("label",{attrs:{for:"format-image"}},[t._v("Photo")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.format,expression:"format"}],attrs:{type:"radio",id:"format-text",value:"text"},domProps:{checked:t._q(t.format,"text")},on:{change:function(e){t.format="text"}}}),n("label",{attrs:{for:"format-text"}},[t._v("Text")])])]),n("ul",t._l(t.mediaItems,(function(e){return n("AlbumMediaItem",{key:e.id,attrs:{format:t.format,"media-item":e}})})),1),t.mediaItem?n("aside",{on:{click:function(e){return t.viewMediaItem(null)}}},[n("img",{attrs:{src:t.mediaItem.baseUrl}})]):t._e()]):t._e()},B=[],G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{class:["is-"+t.format],attrs:{title:t.description}},[n("a",{on:{click:function(e){return t.view()}}},["photo"===t.format?n("AlbumMediaItemImage",{attrs:{"description-theme":t.descriptionTheme,"media-item":t.mediaItem}}):n("AlbumMediaItemText",{attrs:{"description-theme":t.descriptionTheme}})],1)])},H=[],V=(n("a4d3"),n("e01a"),n("466d"),n("5319"),n("1276"),n("498a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("img",{style:{"background-color":t.backgroundColor},attrs:{alt:t.descriptionTheme,src:t.mediaItem.baseUrl}})}),K=[],Q=n("fb2f"),W=n.n(Q);function X(t,e){return W()(t).lightness(2*Math.random()*e-e,!0).hex()}var Y="#202124",Z=.1,tt=function(t){Object(w["a"])(n,t);var e=Object(M["a"])(n);function n(){var t;return Object(u["a"])(this,n),t=e.apply(this,arguments),t.backgroundColor=X(Y,Z),t}return n}(P["c"]);Object(T["a"])([Object(P["b"])(String)],tt.prototype,"descriptionTheme",void 0),Object(T["a"])([Object(P["b"])(Object)],tt.prototype,"mediaItem",void 0),tt=Object(T["a"])([P["a"]],tt);var et=tt,nt=et,at=(n("7a13"),Object(q["a"])(nt,V,K,!1,null,"096a4bf0",null)),it=at.exports,rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{style:t.style},[t._v(t._s(t.descriptionTheme))])},ot=[],ct="#a7a7a7",ut=.25,st=function(t){Object(w["a"])(n,t);var e=Object(M["a"])(n);function n(){var t;return Object(u["a"])(this,n),t=e.apply(this,arguments),t.color=X(ct,ut),t}return Object(s["a"])(n,[{key:"style",get:function(){return{color:this.color,"font-weight":100*(Math.floor(7*Math.random())+1)}}}]),n}(P["c"]);Object(T["a"])([Object(P["b"])(String)],st.prototype,"descriptionTheme",void 0),st=Object(T["a"])([P["a"]],st);var lt=st,mt=lt,dt=Object(q["a"])(mt,rt,ot,!1,null,null,null),bt=dt.exports,pt=Object(o["a"])("photos"),ft=pt.mapActions,ht=function(t){Object(w["a"])(n,t);var e=Object(M["a"])(n);function n(){var t;return Object(u["a"])(this,n),t=e.apply(this,arguments),t.descriptionTheme="",t}return Object(s["a"])(n,[{key:"created",value:function(){this.description?this.descriptionTheme="".concat(this.extractDescriptionTheme(this.description)," "):console.warn("Media item does not have description",this.mediaItem)}},{key:"view",value:function(){this.viewMediaItem(this.mediaItem),"undefined"!==typeof this.$gtag&&this.$gtag.event("Click",{event_category:this.format,event_label:this.descriptionTheme})}},{key:"extractDescriptionTheme",value:function(t){var e=t.replace(/[\u201C\u201D]/g,'"'),n=e.match(/[^"]*"([^"]+)"[^"]*/);return 3===e.split('"').length&&null!==n||console.warn("Potentially unable to parse description",{description:t,baseUrl:this.mediaItem.baseUrl}),null===n?t:n[1]}},{key:"description",get:function(){var t=this.mediaItem.description;return t?t.trim():""}}]),n}(P["c"]);Object(T["a"])([Object(P["b"])(Object)],ht.prototype,"mediaItem",void 0),Object(T["a"])([Object(P["b"])(String)],ht.prototype,"format",void 0),ht=Object(T["a"])([Object(P["a"])({components:{AlbumMediaItemText:bt,AlbumMediaItemImage:it},methods:ft(["viewMediaItem"])})],ht);var vt,gt=ht,Ot=gt,jt=(n("be82"),Object(q["a"])(Ot,G,H,!1,null,"adc748a4",null)),It=jt.exports;(function(t){t["Photo"]="photo",t["Text"]="text"})(vt||(vt={}));var yt=Object(o["a"])("photos"),_t=yt.mapActions,St=yt.mapState,xt=function(t){Object(w["a"])(n,t);var e=Object(M["a"])(n);function n(){var t;return Object(u["a"])(this,n),t=e.apply(this,arguments),t.format=vt.Photo,t}return n}(P["c"]);Object(T["a"])([Object(P["b"])(String)],xt.prototype,"albumId",void 0),Object(T["a"])([Object(P["d"])("albumId")],xt.prototype,"getAlbum",void 0),xt=Object(T["a"])([Object(P["a"])({components:{AlbumMediaItem:It},computed:St(["album","mediaItem","mediaItems"]),methods:_t(["getAlbum","viewMediaItem"])})],xt);var At=xt,kt=At,wt=(n("eb11"),Object(q["a"])(kt,R,B,!1,null,"42f4186e",null)),Mt=wt.exports,Tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t.isSignedIn?n("button",{attrs:{type:"button"},on:{click:function(e){return t.logout()}}},[t._v(" Logout ")]):t._e(),t.isSignedIn?t._e():n("button",{attrs:{disabled:null===t.isSignedIn,type:"button"},on:{click:function(e){return t.login()}}},[t._v(" Login ")])])},Pt=[],$t=Object(o["a"])("photos"),Et=$t.mapState,Ct=function(t){Object(w["a"])(n,t);var e=Object(M["a"])(n);function n(){return Object(u["a"])(this,n),e.apply(this,arguments)}return Object(s["a"])(n,[{key:"login",value:function(){this.$gapi.login()}},{key:"logout",value:function(){this.$gapi.logout()}}]),n}(P["c"]);Ct=Object(T["a"])([Object(P["a"])({computed:Et(["isSignedIn"])})],Ct);var Lt=Ct,Ut=Lt,zt=Object(q["a"])(Ut,Tt,Pt,!1,null,null,null),Nt=zt.exports,Jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("textarea",{attrs:{readonly:""},domProps:{value:t.state}})},qt=[],Dt=(n("baa5"),n("d81d"),function(t){Object(w["a"])(n,t);var e=Object(M["a"])(n);function n(){return Object(u["a"])(this,n),e.apply(this,arguments)}return Object(s["a"])(n,[{key:"state",get:function(){var t={},e=JSON.parse(JSON.stringify(this.$store.state)),n="".concat(document.title.replace("/","_"),"_files");return e.photos.albums=[],e.photos.mediaItems=e.photos.mediaItems.map((function(e){var a=e.filename,i=a.lastIndexOf("."),r=a.substring(1+i,a.length);"HEIC"===r&&(r="jpg"),a=a.substring(0,i).replace("~","_");var o=a.toLowerCase();return"undefined"!==typeof t[o]?a+="(".concat(t[o]++,")"):t[o]=1,e.baseUrl="".concat(n,"/").concat(a,".").concat(r),e})),JSON.stringify(e)}}]),n}(P["c"]));Dt=Object(T["a"])([Object(P["a"])({})],Dt);var Ft=Dt,Rt=Ft,Bt=Object(q["a"])(Rt,Jt,qt,!1,null,null,null),Gt=Bt.exports,Ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",[t._m(0),n("tbody",t._l(t.albums,(function(e){return n("tr",{key:e.id,attrs:{value:e.id}},[n("td",[t._v(" "+t._s(e.title)+" ")]),n("td",[t._v(" "+t._s(e.mediaItemsCount)+" ")]),n("td"),n("td"),n("td")])})),0)])},Vt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("th",[t._v("Name")]),n("th",[t._v("Total Media")]),n("th",[t._v("Photos")]),n("th",[t._v("Videos")]),n("th",[t._v("Size")])])}],Kt=Object(o["a"])("photos"),Qt=Kt.mapActions,Wt=Kt.mapState,Xt=function(t){Object(w["a"])(n,t);var e=Object(M["a"])(n);function n(){return Object(u["a"])(this,n),e.apply(this,arguments)}return Object(s["a"])(n,[{key:"created",value:function(){this.listAlbums()}}]),n}(P["c"]);Object(T["a"])([Object(P["b"])(String)],Xt.prototype,"value",void 0),Object(T["a"])([Object(P["d"])("isSignedIn")],Xt.prototype,"listAlbums",void 0),Xt=Object(T["a"])([Object(P["a"])({computed:Wt(["albums","isSignedIn"]),methods:Qt(["listAlbums"])})],Xt);var Yt=Xt,Zt=Yt,te=(n("8b2d"),Object(q["a"])(Zt,Ht,Vt,!1,null,"26e42dd1",null)),ee=te.exports,ne=Object(o["a"])("photos"),ae=ne.mapActions,ie=ne.mapState,re=function(t){Object(w["a"])(n,t);var e=Object(M["a"])(n);function n(){var t;return Object(u["a"])(this,n),t=e.apply(this,arguments),t.defaultTitle="",t.selectedAlbumId="",t}return Object(s["a"])(n,[{key:"created",value:function(){this.$gapi&&(this.$gapi.isSignedIn().then(this.signIn),this.$gapi.listenUserSignIn(this.signIn)),this.defaultTitle=document.title}},{key:"onAlbumChange",value:function(t){document.title=t&&t.title?t.title:this.defaultTitle}}]),n}(P["c"]);Object(T["a"])([Object(P["b"])(String)],re.prototype,"externalStatePath",void 0),Object(T["a"])([Object(P["d"])("album")],re.prototype,"onAlbumChange",null),re=Object(T["a"])([Object(P["a"])({components:{TextareaExternalState:Gt,Login:Nt,Album:Mt,SelectAlbum:F,AlbumList:ee},computed:ie(["album","isSignedIn"]),methods:ae(["signIn"])})],re);var oe=re,ce=oe,ue=(n("9993"),Object(q["a"])(ce,A,k,!1,null,null,null)),se=ue.exports,le=n("a584"),me="912773918968-mc3jj0m09k687dh5u846q3qcubpe1keh.apps.googleusercontent.com",de=null;a["a"].config.productionTip=!1;var be="app",pe=document.getElementById(be).dataset.externalStatePath;pe?fetch(pe).then((function(t){return t.json().then(x.replaceState.bind(x))})):a["a"].use(r.a,{discoveryDocs:["https://photoslibrary.googleapis.com/$discovery/rest?version=v1"],clientId:me,scope:"https://www.googleapis.com/auth/photoslibrary.readonly"}),de&&a["a"].use(le["a"],{config:{id:de}}),new a["a"]({created:function(){p.initialize(this.$gapi)},render:function(t){return t(se,{props:{externalStatePath:pe}})},store:x}).$mount("#".concat(be))},e903:function(t,e,n){},eb11:function(t,e,n){"use strict";var a=n("eb4e"),i=n.n(a);i.a},eb4e:function(t,e,n){}});
//# sourceMappingURL=app.c8acbc51.js.map